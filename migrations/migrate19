DROP TABLE "message" CASCADE;
CREATe TABLE "message"("id" SERIAL PRIMARY KEY UNIQUE,"created_ts" TIMESTAMP NOT NULL,"type" VARCHAR NOT NULL,"from_user" INT8 NULL,"from_project" INT8 NULL,"to_user" INT8 NOT NULL,"to_project" INT8 NULL,"content" VARCHAR NOT NULL,"archived" BOOLEAN NOT NULL);
ALTER TABLE "message" ADD CONSTRAINT "message_from_user_fkey" FOREIGN KEY("from_user") REFERENCES "user"("id");
ALTER TABLE "message" ADD CONSTRAINT "message_from_project_fkey" FOREIGN KEY("from_project") REFERENCES "project"("id");
ALTER TABLE "message" ADD CONSTRAINT "message_to_user_fkey" FOREIGN KEY("to_user") REFERENCES "user"("id");
ALTER TABLE "message" ADD CONSTRAINT "message_to_project_fkey" FOREIGN KEY("to_project") REFERENCES "project"("id");
ALTER TABLE "event_message_sent" ADD CONSTRAINT "event_message_sent_message_fkey" FOREIGN KEY("message") REFERENCES "message"("id");
CREATe TABLE "unapproved_message_comment"("id" SERIAL PRIMARY KEY UNIQUE,"message" INT8 NOT NULL,"comment" INT8 NOT NULL);
ALTER TABLE "unapproved_message_comment" ADD CONSTRAINT "unapproved_message_comment_message_fkey" FOREIGN KEY("message") REFERENCES "message"("id");
ALTER TABLE "unapproved_message_comment" ADD CONSTRAINT "unapproved_message_comment_comment_fkey" FOREIGN KEY("comment") REFERENCES "comment"("id");
